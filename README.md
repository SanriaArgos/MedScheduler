## MedScheduler
**Сервис по поиску врачей и записи на прием.**

**Авторы**: ```Бальжиев Аюр```, ```Грудцына Виктория```, ```Толстограева Виктория```

## Описание проекта

MedScheduler — это клиент-серверное медицинское приложение и веб-сервис, предназначенные для управления записями на приём к врачам. Основная функциональность включает поиск врачей по фильтрам, управление записями на прием, оставление заявки на занятый слот для приема, регистрацию и авторизацию пользователей. Система поддерживает ролевую модель доступа с разделением прав между следующими категориями пользователей: пациенты, врачи, младшие и старшие администраторы.

Приложение обеспечивает удобный доступ к услугам через десктопное приложение на базе Qt и веб-интерфейс с идентичной функциональностью.

## Технологии

Проект MedScheduler реализован на языке C++, охватывая как серверную логику, так и клиентский интерфейс.

Основные технологии и инструменты:

- **Серверная часть (C++):** Boost.Beast (HTTP сервер), libpq (работа с PostgreSQL), OpenSSL (TLS/SSL).
- **Клиент (C++):** Qt5 (графический интерфейс), libcurl (HTTP клиент).
- **Фронтенд:** JavaScript (для реализации веб-интерфейса с аналогичной функциональностью).
- **База данных:** PostgreSQL.
- **Инфраструктура и DevOps:** Docker, Nginx (reverse proxy и SSL-терминация), Certbot, виртуальная машина в Yandex.Cloud.
- **CI/CD:** GitHub Actions (автоматическая сборка, деплой и обновление).
- **Тестирование:** Postman (ручное тестирование API).

## Архитектура

Система построена по модульному принципу с использованием контейнеризации:

- Все основные компоненты (серверное приложение, база данных и фронтенд) развернуты в отдельных Docker контейнерах на виртуальной машине с Ubuntu в Yandex.Cloud. 
- Для обработки и маршрутизации входящих HTTP/HTTPS запросов используется reverse proxy Nginx, который:
  - Принимает все запросы от клиентов,
  - Маршрутизирует запросы к API серверу или фронтенду,
  - Обеспечивает SSL-терминацию с использованием сертификатов, полученных через Certbot, гарантируя защищённое HTTPS соединение.


## Деплой и CI/CD

Процесс автоматического деплоя реализован с помощью GitHub Actions и включает следующие этапы:

- При пуше в ветку `main` запускается пайплайн деплоя.
- Для серверной части и базы данных выполняется:
  - Сборка Docker образов,
  - Передача архивов с образами на сервер через SSH,
  - Остановка текущих контейнеров и запуск новых с обновлёнными версиями.
- Для фронтенда:
  - Сборка и упаковка веб-приложения,
  - Копирование собранных файлов на сервер,
  - Сборка и запуск Docker контейнера фронтенда.

## Безопасность

- Применяется механизм базовой аутентификации (Basic Authentication).
- Пароли пользователей хранятся в базе данных в виде хешей, полученных с применением алгоритма SHA-256 и уникальной соли для каждого пользователя.
- Все данные передаются по защищённому протоколу HTTPS, обеспечивающему шифрование и целостность информации во время сетевого взаимодействия.


## Структура проекта
![Схема взаимодействия объектов в базе данных](images/table_interaction_scheme.jpg)


## Тестирование API

Для верификации корректности работы API сервиса предусмотрена коллекция тестов для Postman. 

### Предварительные требования

1. Установленный [Postman](https://www.postman.com/downloads/)
2. Доступ к серверу API (удаленному или локальному)

### Инструкция по запуску тестов

#### Импорт коллекции тестов

1. Откройте интерфейс Postman
2. Нажмите кнопку `Import` в левом верхнем углу
3. Выберите файл `tests_for_MedScheduler.postman_collection.json`
4. Подтвердите импорт коллекции

#### Настройка окружения

1. Создайте новое окружение через меню `Environments` 
2. Добавьте переменную окружения:
   - Имя: `base_url`
   - Значение: `https://api.medscheduler.ru` (или `http://localhost:[PORT]` для локального тестирования)
3. Сохраните изменения

#### Выполнение тестов

1. Откройте импортированную коллекцию
2. Нажмите кнопку `Run collection`
3. В диалоговом окне выберите созданное окружение
4. Запустите выполнение тестов

### Установка приложения и его запуск

1. Перейдите в (https://github.com/yourusername/MedScheduler/releases)
2. Скачайте: `MedScheduler.zip`
3. Откройте распакованную папку, перейдите в папку release
4. Запустите файл `MedScheduler.exe`

**Сайт проекта:** [http://medscheduler.ru/](http://medscheduler.ru/)
16.05.25 
Вика Грудцына
1. нужно переделать тесты/функции для cancel_appointment и cancel_appointment_from_waitlist после внесения правок Вики
2. реализована у пациента и врача функция delete_self_account. тесты тоже написаны, я сколько-то потестировалаю нужно еще кому-то тестить
3. реализована у старшего админа функция delete_user_by_phone. тесты тоже написаны, я сколько-то потестировалаю нужно еще кому-то тестить
4. добавлена функция get_cancelled_slots и тесты к ней, но еще не протестирована, так как лег сервер и поднять быстро его не получилось
5. реализована get_waitlist, тесты написаны, они проходят в базовом случае
6. реализована get_waitlist_count, тесты написаны, они проходят в базовом случае

---
21.05.25 
Вика Грудцына
1. добавлена установка cron в контейнер
2. добавлено выполннение SQL-скриптов: 00-init_cron.sql, 10-cleanup_old_data.sql, 20-cleanup_waitlist.sql, 30-expire_waitlisters.sql, 40-notify_about_records.sql, 50-notify_waitlist.sql
3. это все требует тестирования

---
01.06.25
Вика Толстограева
1. Реализовала редактирование файлов в хэндлерах edit_doctor_profile, edit_patient_profile, edit_senior_admin_profile, edit_junior_admin_profile. Как оно работает:
    - Все четыре функции проверяют сначала обязательные поля user_id и current_password.
    - С помощью запроса SELECT user_type FROM users WHERE id = … убеждаются, что пользователь действительно того типа, который сейчас редактируется (пациент/врач/младший админ/старший админ).
    - **Обязательно** считывают текущий hashed_password и salt, проверяют, что current_password при хешировании совпадает с тем, что лежит в БД. Иначе ничего отредактировать не сможем.
    - Составляют динамический список полей для UPDATE users SET … WHERE id = …, опираясь только на разрешённые конкретному типу пользователя поля:
        - Пациент/врач/старший админ — могут менять last_name, first_name, patronymic, phone, и пароль.
        - Младший админ — может менять last_name, first_name, patronymic и пароль, но не phone.
    - При необходимости заменяют старый пароль новым, пересоздавая salt и hashed_password (SHA256). Новый нужно ввести два раза. Если "new_password" не совпадает с "new_password_repeat", запрос отвергается.
    - Выполняют один UPDATE users …, и возвращают {"success":true} или {"success":false,"error":…}.
    - Во всех случаях при смене телефона дополнительно проверяется его уникальность (чтобы не было двух пользователей с одним и тем же phone).
    - Идентификатор пользователя (id) остаётся прежним, а все остальные поля в таблице users обновляются «на месте».

2. Реализовала сбор статистики по врачу в get_doctor_statistic. Сатистику может просматривать младший администратор больницы. Он вводит номер телефона доктора, после чего ему выдает количество пациентов, принятых за месяц, значение рейтинга врача и цену за прием в больнице младшего администратора. 
    - Хэндлер собирает для врача по его телефону три цифры, но только если он прикреплён к той же больнице, что и младший администратор.
    - По junior_admin_id смотрит его hospital_id.
    - По doctor_phone находит user_id и проверяет, что это действительно врач.
    - Проверяет в таблице doctors, что у него в hospital_ids есть тот же hospital_id, и берёт из неё doctor_id и price.
    - В таблице records считает, сколько пациентов этот врач принял в своей больнице за текущий месяц (т.е. слотов с заполненным patient_id).
    - В таблице rating считает средний балл (AVG(rate)), округлённый до десятых.
    - Возвращает JSON:
       - "patients_count": <число>,
       - "average_rating": <число.с_одним_знаком>,
       - "price": <число>
    - Если чего-то не находит (врач не существует, не в той больнице или нет отзывов), возвращает соответствующую ошибку.

01.06.25 - 02.06.25 Вика Грудцына
1) добавлена функция edit_doctor_profile к клиенту доктора, реализорвана на сервере, написаны тесты. Но почему-то она не работает никак... никак не могу пофиксить
2) добавлена функция edit_junior_admin_profile к клиенту младшего админа, реализована на сервере, тесты написаны и проходят. По крайней мере, для некоторых кейсов
3) добавлена функция edit_senior_admin_profile к клиенту младшего админа, реализована на сервере, тесты написаны и проходят. По крайней мере, для некоторых кейсов
4) добавлена функция edit_patient_profile к клиенту пациента, реализована на сервере, тесты написаны и проходят. По крайней мере, для некоторых кейсов
